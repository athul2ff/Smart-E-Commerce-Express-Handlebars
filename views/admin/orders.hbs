<div class="row" style="text-align: center; align-items: center; float: right; margin-right: 5%;">
    <a href="/admin/pending-orders">
        <div style="background-color: #0562afb4;margin: 10px; width: 140px; color: #ffff; padding: 4px;">pending Orders
        </div>
    </a>
    <a href="/admin/deliverd-orders">
        <div style="background-color: #05123898;margin: 10px; width: 140px; color: #ffff; padding: 4px;">Deliverd Orders
        </div>
    </a>
    <a href="/admin/failed-orders">
        <div style="background-color: #05123898;margin: 10px; width: 140px; color: #ffff; padding: 4px;">Failed Orders
        </div>
    </a>
</div>

<div class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">

                <div class="card">
                    <div class="card-header card-header-primary">
                        <div style="float: left;" class="col-md-6">
                            <h5 class="card-title">Orders</h5>
                        </div>

                    </div>

                    <div class="card-body">
                        <div class="table-responsive">

                            <table class="table">
                                <thead class="text-primary">
                                    <th>No</th>
                                    <th>Date</th>
                                    <th>Payment</th>
                                    <th>Amount</th>
                                    <th>Due Amount</th>
                                    <th>Address</th>
                                    <th>View Porducts</th>
                                    <th>Status</th>

                                </thead>
                                <tbody id="">
                                    {{#each orders}}

                                    <tr>
                                        <td>{{add @index}}</td>
                                        <td>{{dateTime this.delivaryDetails.date}}</td>
                                        <td>{{this.paymentMethod}}</td>
                                        <td>
                                            <p class="text-info">₹ {{this.grandTotal}}</p>
                                        </td>
                                        <td>
                                            <p class="text-success"><b>
                                                    ₹
                                                    {{dueAmount this.grandTotal this.paymentMethod}}
                                                </b></p>
                                        </td>
                                        <td>{{this.delivaryDetails.name}}
                                            <br />
                                            {{this.delivaryDetails.email}}
                                            <br />
                                            {{this.delivaryDetails.mobile}},{{this.delivaryDetails.mobile2}}
                                            <br />
                                            {{this.delivaryDetails.state}},{{this.delivaryDetails.country}}
                                            <br />
                                            {{this.delivaryDetails.city}},{{this.delivaryDetails.pincode}}
                                            <br />
                                            {{this.delivaryDetails.landmark}}
                                            <br />
                                            {{this.delivaryDetails.address}}

                                        </td>
                                        <td><a href="" data-toggle="modal" data-target="#{{this._id}}">
                                                <p class="text-info"><b>View Porducts</b> </p>
                                            </a></td>
                                        <td>

                                            <div class="box body">
                                                <select onchange="a(event,'{{this._id}}')">
                                                    <option value="received" onclick="sample('{{this._id}}')" {{checkOrderStatus this.statusupdate}}>Received</option>
                                                    <option value="shipped" {{checkOrderStatus1 this.statusupdate}}>Shipped</option>
                                                    <option value="delivered" onclick="sample('{{this._id}}')" {{checkOrderStatus2 this.statusupdate}}>Deliverd</option>
                                                </select>
                                            </div>
                                        </td>
                                        <td>{{this.quantity}}</td>
                                        <td>
                                            <!-- Modal -->
                                            <div class="modal fade right" id="{{this._id}}" tabindex="-1" role="dialog"
                                                aria-labelledby="exampleModalPreviewLabel" aria-hidden="true">
                                                <div class="modal-dialog-full-width modal-dialog momodel modal-fluid"
                                                    role="document">
                                                    <div class="modal-content-full-width modal-content">
                                                        <div class="modal-header-full-width modal-header text-center">
                                                            <h5 class="modal-title w-100" id="exampleModalPreviewLabel">
                                                                product _
                                                                {{this.delivaryDetails.email}}</h5>
                                                            <button type="button" class="close" data-dismiss="modal"
                                                                aria-label="Close">
                                                                <span style="font-size: 1.3em;"
                                                                    aria-hidden="true">&times;</span>
                                                            </button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <table class="table table-dar"
                                                                style="background-color: #000000e7;">
                                                                <thead>
                                                                    <tr>
                                                                        <th scope="col">#</th>
                                                                        <th scope="col">Product Name</th>
                                                                        <th scope="col">Brand</th>
                                                                        <th scope="col">Type</th>
                                                                        <th>Size</th>
                                                                        <th>quantity</th>
                                                                        <th>Image</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    {{!-- {{ products this._id}} --}}
                                                                    {{#each products}}
                                                                    <tr>
                                                                        <th scope="row">{{add @index}}</th>
                                                                        <td>{{this.products.title}}</td>
                                                                        <td>{{this.products.brand}}</td>
                                                                        <td>{{this.products.category}}</td>
                                                                        <td>helo{{this.quantity}}</td>
                                                                        <td>{{this.quantity}}</td>
                                                                        <td><img style="height: 100px;"
                                                                                src="/images/admin/img/product-images/{{this.products._id}}_1.jpg"
                                                                                alt="" class="pro-image-front" /></td>

                                                                    </tr>
                                                                    {{/each}}

                                                                </tbody>
                                                            </table>
                                                            <h1
                                                                class="section-heading text-center wow fadeIn my-5 pt-3">
                                                                Please Ensure Packed All Items</h1>

                                                            <h3>
                                                                shipping Address
                                                            </h3>
                                                            <h6>
                                                                <span style="color: rgba(0, 0, 0, 0.705);">
                                                                    {{this.delivaryDetails.name}}
                                                                    <br />
                                                                    {{this.delivaryDetails.email}}
                                                                    <br />
                                                                    {{this.delivaryDetails.mobile}},{{this.delivaryDetails.mobile2}}
                                                                    <br />
                                                                    {{this.delivaryDetails.state}},{{this.delivaryDetails.country}}
                                                                    ,
                                                                    {{this.delivaryDetails.city}},{{this.delivaryDetails.pincode}}
                                                                    ,
                                                                    {{this.delivaryDetails.landmark}}
                                                                    <br />
                                                                    {{this.delivaryDetails.address}}
                                                                </span>
                                                            </h6>
                                                        </div>
                                                        <div class="modal-footer-full-width modal-footer">
                                                            <button type="button"
                                                                class="btn btn-success btn-md btn-rounded"
                                                                data-dismiss="modal" style="margin-right: 100px;">Packed Items</button>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </td>

                                    </tr>
                                    {{/each}}

                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>

    function a(event,orderId) {
       
        $.ajax({
            method: 'post',
             url:'/admin/change-order-status',
             data:{
                    status:event.target.value,
                     orderId:orderId
                },
             success:{}   
        })
    }
</script>

<style>
    .modal-dialog-full-width {
        width: 100% !important;
        height: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
        max-width: none !important;
    }

    .modal-content-full-width {
        height: auto !important;
        min-height: 100% !important;
        border-radius: 0 !important;
        background-color: #ececec !important
    }

    .modal-header-full-width {
        border-bottom: 1px solid #9ea2a2 !important;
    }

    .modal-footer-full-width {
        border-top: 1px solid #9ea2a2 !important;
    }
</style>

<style>
    .box select {
        background-color: #0563af;
        color: white;
        padding: 9px;
        width:
            130px;
        border: none;
        box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
        -webkit-appearance: button;
        appearance: button;
        outline: none;
    }

    .box::before {
        font-family: FontAwesome;
        position: absolute;
        top: 0;
        right: 0;
        width: 20%;
        height: 100%;
        text-align: center;
        font-size: 28px;
        line-height: 45px;
        pointer-events: none;
    }
</style>